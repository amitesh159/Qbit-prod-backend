# =============================================================================
# QBIT PRODUCTION ENVIRONMENT CONFIGURATION FOR RENDER
# =============================================================================
# Copy this file and fill in your actual values
# DO NOT commit the actual .env file with real credentials!
# =============================================================================

# =============================================================================
# APPLICATION SETTINGS
# =============================================================================
APP_NAME=Qbit
APP_VERSION=1.0.0
ENVIRONMENT=production
DEBUG=false
API_V1_PREFIX=/api/v1

# Server Configuration (Render uses $PORT automatically)
HOST=0.0.0.0
PORT=10000
RELOAD=false

# =============================================================================
# DATABASE - MONGODB ATLAS (REQUIRED)
# =============================================================================
# Get from: MongoDB Atlas → Database → Connect → Connect your application
# Format: mongodb+srv://username:password@cluster.mongodb.net/?retryWrites=true&w=majority
MONGODB_URI=mongodb+srv://YOUR_USERNAME:YOUR_PASSWORD@YOUR_CLUSTER.mongodb.net/?retryWrites=true&w=majority
MONGODB_DB_NAME=qbit_production
MONGODB_MIN_POOL_SIZE=10
MONGODB_MAX_POOL_SIZE=100

# =============================================================================
# DATABASE - REDIS CLOUD (REQUIRED)
# =============================================================================
# Get from: Redis Cloud → Database → Configuration
# Format: redis://default:password@host:port
REDIS_URL=redis://default:YOUR_PASSWORD@YOUR_REDIS_HOST:YOUR_PORT
REDIS_MAX_CONNECTIONS=50
REDIS_SOCKET_TIMEOUT=5
REDIS_SOCKET_CONNECT_TIMEOUT=5

# =============================================================================
# AI/LLM PROVIDERS (REQUIRED)
# =============================================================================

# Groq Cloud (Central Hub) - Free Tier: 30 RPM
# Get from: console.groq.com → API Keys
# Provide 3-5 keys separated by commas for rotation
GROQ_API_KEYS=gsk_YOUR_KEY_1,gsk_YOUR_KEY_2,gsk_YOUR_KEY_3
GROQ_MODEL=openai/gpt-oss-120b
GROQ_RPM_LIMIT=30

# Cerebras Cloud (Full Stack Agent) - Free Tier: 30 RPM
# Get from: cerebras.ai → API Keys
# Provide 2-3 keys separated by commas for rotation
CEREBRAS_API_KEYS=csk_YOUR_KEY_1,csk_YOUR_KEY_2,csk_YOUR_KEY_3
CEREBRAS_MODEL=gpt-oss-120b
CEREBRAS_RPM_LIMIT=30

# Bytez Cloud (Claude Sonnet 4) - OPTIONAL
# Get from: Bytez API provider
# Provide 2 keys separated by commas for rotation
BYTEZ_API_KEYS=YOUR_BYTEZ_KEY_1,YOUR_BYTEZ_KEY_2
BYTEZ_MODEL=anthropic/claude-sonnet-4-20250514
BYTEZ_RPS_LIMIT=10

# =============================================================================
# E2B SANDBOX (REQUIRED)
# =============================================================================
# Get from: e2b.dev → Dashboard → API Keys
E2B_API_KEY=e2b_YOUR_API_KEY_HERE
E2B_TIMEOUT=300
E2B_MAX_SANDBOXES=20
# Get from: e2b.dev → Templates (or use default)
E2B_TEMPLATE_ID=YOUR_TEMPLATE_ID

# =============================================================================
# AUTHENTICATION & SECURITY (REQUIRED)
# =============================================================================
# Generate with: openssl rand -hex 32
JWT_SECRET_KEY=YOUR_GENERATED_SECRET_KEY_HERE_64_CHARACTERS_LONG
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_DAYS=7

# Password Hashing
BCRYPT_ROUNDS=12

# GitHub OAuth (OPTIONAL - Only if using GitHub authentication)
# Get from: GitHub → Settings → Developer settings → OAuth Apps
GITHUB_CLIENT_ID=YOUR_GITHUB_CLIENT_ID
GITHUB_CLIENT_SECRET=YOUR_GITHUB_CLIENT_SECRET
# Update with your actual Render URL
GITHUB_CALLBACK_URL=https://your-service.onrender.com/api/v1/auth/github/callback

# =============================================================================
# CELERY (BACKGROUND TASKS) (REQUIRED)
# =============================================================================
# Use the same Redis URL as above, with /0 suffix
CELERY_BROKER_URL=redis://default:YOUR_PASSWORD@YOUR_REDIS_HOST:YOUR_PORT/0
CELERY_RESULT_BACKEND=redis://default:YOUR_PASSWORD@YOUR_REDIS_HOST:YOUR_PORT/0
CELERY_TASK_SERIALIZER=json
CELERY_RESULT_SERIALIZER=json
CELERY_TIMEZONE=UTC
CELERY_ENABLE_UTC=true

# =============================================================================
# RATE LIMITING
# =============================================================================
RATE_LIMIT_CODE_GENERATION=10
RATE_LIMIT_API_CALLS=60
RATE_LIMIT_ENABLED=true
RATE_LIMIT_GLOBAL=1000

# =============================================================================
# CREDITS SYSTEM
# =============================================================================
DEFAULT_USER_CREDITS=100
CREDIT_SIMPLE_PROJECT=10
CREDIT_MODERATE_PROJECT=20
CREDIT_COMPLEX_PROJECT=30
CREDIT_WEB_SEARCH=2

# =============================================================================
# CORS SETTINGS (IMPORTANT - UPDATE WITH YOUR FRONTEND URL)
# =============================================================================
# Add your production frontend URLs here
# Example: https://your-frontend.vercel.app,https://your-custom-domain.com
CORS_ORIGINS=https://your-frontend-url.vercel.app,https://your-custom-domain.com
CORS_ALLOW_CREDENTIALS=true
CORS_ALLOW_METHODS=*
CORS_ALLOW_HEADERS=*

# =============================================================================
# LOGGING
# =============================================================================
LOG_LEVEL=INFO
LOG_FORMAT=json

# =============================================================================
# MONITORING
# =============================================================================
ENABLE_METRICS=true
METRICS_PORT=9090

# =============================================================================
# CONTEXT MANAGEMENT
# =============================================================================
MAX_CONTEXT_TOKENS=30000
MAX_CONVERSATION_TURNS=10
MAX_FILES_IN_CONTEXT=8
MAX_MODULES_IN_CONTEXT=5

# =============================================================================
# SANDBOX DECISION
# =============================================================================
DEFAULT_SANDBOX=auto

# =============================================================================
# PRODUCTION OPTIONS
# =============================================================================
SHOW_ERROR_DETAILS=false
ENABLE_DOCS=true

# =============================================================================
# INSTRUCTIONS FOR RENDER DEPLOYMENT
# =============================================================================
# 1. DO NOT copy this file to Render directly
# 2. Instead, set each variable individually in Render Dashboard:
#    - Go to your service → Environment → Add Environment Variable
#    - Copy each variable name and value from this file
#    - Click "Save Changes"
# 
# 3. Required variables (must set):
#    - MONGODB_URI
#    - REDIS_URL
#    - GROQ_API_KEYS
#    - CEREBRAS_API_KEYS
#    - E2B_API_KEY
#    - JWT_SECRET_KEY
#    - CELERY_BROKER_URL
#    - CELERY_RESULT_BACKEND
#    - CORS_ORIGINS
#
# 4. Optional variables (set if needed):
#    - BYTEZ_API_KEYS
#    - GITHUB_CLIENT_ID
#    - GITHUB_CLIENT_SECRET
#
# 5. All other variables have sensible defaults in render.yaml
#
# For detailed instructions, see DEPLOYMENT_GUIDE.md
